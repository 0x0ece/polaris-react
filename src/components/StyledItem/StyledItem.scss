@import '../../styles/common';

$gradient-one: linear-gradient(
  rgba(223, 227, 232, 0.3),
  rgba(223, 227, 232, 0.3)
);
$gradient-two: linear-gradient(
  rgba(179, 188, 245, 0.1),
  rgba(179, 188, 245, 0.1)
);
$gradient-three: linear-gradient(
  rgba(179, 188, 245, 0.15),
  rgba(179, 188, 245, 0.15)
);

@mixin overlay {
  position: absolute;
  top: 0;
  right: 0;
  height: 100%;
  width: 100%;
}

@mixin action-hide {
  clip: rect(1px, 1px, 1px, 1px);
  overflow: hidden;
  height: 1px;
}

@mixin action-unhide {
  clip: auto;
  overflow: visible;
  height: 100%;
}

@mixin action-show {
  @include action-unhide;
  right: spacing();

  @include page-content-when-partially-condensed {
    display: none;
  }
}

$translate-offset: rem(48px) - rem(12px) + spacing(extra-tight);

.Media {
  flex: 0 0 auto;
  margin-right: spacing(loose);
  color: inherit;
  text-decoration: none;
}

.Handle {
  width: rem(48px);
  min-height: rem(44px);
  justify-content: center;
  align-items: center;
  margin: (-1 * rem(12px)) spacing(extra-tight) (-1 * rem(12px))
    (-1 * rem(12px));
  display: flex;

  @include breakpoint-before(458px, false) {
    visibility: hidden;

    .selectMode & {
      visibility: visible;
    }
  }
}

.Owned {
  display: flex;
  align-self: flex-start;
}

.Actions {
  position: absolute;
  top: 0;
  display: flex;
  pointer-events: initial;
  height: 100%;
  max-height: rem(56px);
  @include action-hide;

  @include page-content-when-partially-condensed {
    display: none;
  }
}

.persistActions {
  .Actions {
    position: relative;
    display: flex;
    flex: 0 0 auto;
    flex-basis: auto;
    align-items: center;
    margin-top: 0;
    margin-left: spacing();
    pointer-events: initial;
    height: 100%;

    @include page-content-when-partially-condensed {
      display: none;
    }
  }
}

.Disclosure {
  position: relative;
  top: -1 * rem(12px);
  right: -1 * rem(16px);
  display: none;
  width: rem(48px);
  min-height: rem(44px);
  pointer-events: initial;

  .selectMode & {
    display: none;
  }

  @include page-content-when-partially-condensed {
    display: flex;
    flex: 0 0 rem(48px);
    justify-content: center;
    align-items: center;
  }
}

.Content {
  @include layout-flex-fix;
  flex: 1 1 auto;
  align-self: center;
}

.Container {
  position: relative;
  z-index: 2;
  padding: rem(12px) spacing();
  min-height: rem(44px);
  display: flex;
  align-items: flex-start;

  @include breakpoint-after(458px) {
    padding: rem(12px) spacing(loose);
  }
}

.StyledItem {
  position: relative;
  z-index: 1;
  overflow: hidden;
  // max-width: 100%;

  + .StyledItem {
    border-top: border();
  }

  cursor: pointer;

  &:focus-within:not(.persistActions),
  &:hover:not(.persistActions) {
    .Actions {
      @include action-show;
    }
  }
}

.Overlay {
  @include overlay;
  opacity: 0;
  z-index: 1;

  .StyledItem:not(.persistActions) & {
    &:focus {
      + .Container {
        .Actions {
          @include action-show;
        }
      }
    }
  }
}

.selectable {
  width: calc(100% + #{$translate-offset});
  transform: translateX(-1 * $translate-offset);
  transition: transform easing() duration();
  margin-right: -1 * $translate-offset;

  &.selectMode {
    transform: translateX(0);
  }

  @include breakpoint-after(458px) {
    width: 100%;
    transform: translateX(0);
    margin-right: 0;
  }
}

// Start of interactions selector
.StyledItem {
  &:hover {
    background-image: $gradient-one;
  }

  &:active {
    background-image: $gradient-two;
  }

  &.selected {
    background-image: $gradient-three;

    &:hover {
      background-image: $gradient-three, $gradient-one;
    }

    &:active {
      background-image: $gradient-three, $gradient-two;
    }
  }
}

.FocusLine {
  display: none;
}

.Overlay:focus {
  + .FocusLine {
    @include overlay;
    border-left: rem(2px) color('indigo') solid;
    display: block;
    background-image: $gradient-one;
  }
}

.selected:focus-within {
  &:hover {
    background-image: $gradient-three, $gradient-one, $gradient-one;
  }
}
//End of interactions
